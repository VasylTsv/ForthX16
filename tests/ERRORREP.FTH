\ TO COLLECT AND REPORT ON THE NUMBER OF ERRORS RESULTING FROM RUNNING THE\ ANS FORTH AND FORTH 2012 TEST PROGRAMS\ THIS PROGRAM WAS WRITTEN BY GERRY JACKSON IN 2015, AND IS IN THE PUBLIC\ DOMAIN - IT CAN BE DISTRIBUTED AND/OR MODIFIED IN ANY WAY BUT PLEASE\ RETAIN THIS NOTICE.\ THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL,\ BUT WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF\ MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\ ------------------------------------------------------------------------------\ THIS FILE IS INCLUDED AFTER CORE TESTS ARE COMPLETE AND ONLY USES CORE WORDS\ ALREADY TESTED. THE PURPOSE OF THIS FILE IS TO COUNT ERRORS IN TEST RESULTS\ AND PRESENT THEM AS A SUMMARY AT THE END OF THE TESTS.DECIMALVARIABLE TOTAL-ERRORS: ERROR-COUNT  ( "NAME" N1 -- N2 )  \ N2 = N1 + 1CELL   CREATE  DUP , CELL+   DOES>  ( -- OFFSET ) @     \ OFFSET IN ADDRESS UNITS;0     \ OFFSET INTO ERRORS[] ARRAYERROR-COUNT CORE-ERRORS          ERROR-COUNT CORE-EXT-ERRORSERROR-COUNT DOUBLE-ERRORS        ERROR-COUNT EXCEPTION-ERRORSERROR-COUNT FACILITY-ERRORS      ERROR-COUNT FILE-ERRORSERROR-COUNT LOCALS-ERRORS        ERROR-COUNT MEMORY-ERRORSERROR-COUNT SEARCHORDER-ERRORS   ERROR-COUNT STRING-ERRORSERROR-COUNT TOOLS-ERRORS         ERROR-COUNT BLOCK-ERRORSCREATE ERRORS[] DUP ALLOT CONSTANT #ERROR-COUNTS\ SET-ERROR-COUNT CALLED AT THE END OF EACH TEST FILE WITH ITS OWN OFFSET INTO\ THE ERRORS[] ARRAY. #ERRORS IS IN FILES TESTER.FR AND TTESTER.FS: SET-ERROR-COUNT  ( OFFSET -- )   #ERRORS @ SWAP ERRORS[] + !   #ERRORS @ TOTAL-ERRORS +!   0 #ERRORS !;: INIT-ERRORS  ( -- )   ERRORS[] #ERROR-COUNTS OVER + SWAP DO -1 I ! 1 CELLS +LOOP   0 TOTAL-ERRORS !   CORE-ERRORS SET-ERROR-COUNT;INIT-ERRORS\ REPORT SUMMARY OF ERRORS25 CONSTANT MARGIN: SHOW-ERROR-LINE  ( N CADDR U -- )   CR SWAP OVER TYPE MARGIN - ABS >R   DUP -1 = IF DROP R> 1- SPACES ." -" ELSE   R> .R THEN;: SHOW-ERROR-COUNT  ( CADDR U OFFSET -- )   ERRORS[] + @ ROT ROT SHOW-ERROR-LINE;: HLINE  ( -- )  CR ." ---------------------------"  ;: REPORT-ERRORS   HLINE   CR 8 SPACES ." ERROR REPORT"   CR ." WORD SET" 13 SPACES ." ERRORS"   HLINE   S" CORE" CORE-ERRORS SHOW-ERROR-COUNT   S" CORE EXTENSION" CORE-EXT-ERRORS SHOW-ERROR-COUNT   S" BLOCK" BLOCK-ERRORS SHOW-ERROR-COUNT   S" DOUBLE NUMBER" DOUBLE-ERRORS SHOW-ERROR-COUNT   S" EXCEPTION" EXCEPTION-ERRORS SHOW-ERROR-COUNT   S" FACILITY" FACILITY-ERRORS SHOW-ERROR-COUNT   S" FILE-ACCESS" FILE-ERRORS SHOW-ERROR-COUNT   S" LOCALS"    LOCALS-ERRORS SHOW-ERROR-COUNT   S" MEMORY-ALLOCATION" MEMORY-ERRORS SHOW-ERROR-COUNT   S" PROGRAMMING-TOOLS" TOOLS-ERRORS SHOW-ERROR-COUNT   S" SEARCH-ORDER" SEARCHORDER-ERRORS SHOW-ERROR-COUNT   S" STRING" STRING-ERRORS SHOW-ERROR-COUNT   HLINE   TOTAL-ERRORS @ S" TOTAL" SHOW-ERROR-LINE   HLINE CR CR;